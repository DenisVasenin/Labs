Задача 2.6 (12):

Шахматная доска состоит из N строк и M столбцов (1 ≤ N, M ≤ 15). Имеется единственный белый король. У черных в распоряжении кони, слоны и ладьи. По заданному расположению фигур требуется взять белым королем все черные фигуры за минимальное число ходов, не находясь при этом под боем.

Ввод:

В первой строке находятся числа M и N. В следующих N строках по M символов задано расположение фигур. Имеются  следующие обозначения:
- «.» – пустая клетка;
- «*» – белый король;
- «K» – черный конь;
- «B» – черный слон;
- «R» – черная ладья.

Вывод:

В единственной строке выводится минимальное число ходов, необходимое для взятия черных фигур. Вывести 0, если черных фигур нет, и  -1, если взять все черные фигуры невозможно.

Ограничения:

На одном тесте время счета не должно превышать 6 сек. Максимально допустимая память 256 мб.
Белый король в начальной позиции не атакован. Общее число черных фигур не более 14.

Пример:

Ввод:

7 9  
.........  
.........  
.........  
..R.K.R..  
.........  
.........  
*........  

Вывод:

9
